config:
  deploymentType: docker-compose
  dockerComposeFile: docker-compose.elestio.yml
  buildCommand: |
    # Install frontend dependencies and build
    cd frontend
    npm ci
    npm run build
    
    # Install backend dependencies
    cd ../backend
    pip install -r requirements.txt

  postDeployCommand: |
    # Run database migrations
    docker-compose exec -T backend alembic upgrade head
    
    # Initialize MinIO bucket
    docker-compose exec -T backend python -c "
    from app.core.database import init_minio
    init_minio()
    "

monitoring:
  - name: Frontend Health
    url: https://catalogv1-12-u23037.vm.elestio.app
    interval: 30s
    
  - name: Backend Health
    url: https://catalogv1-12-u23037.vm.elestio.app/api/health
    interval: 30s
    
  - name: MinIO Console
    url: https://catalogv1-12-u23037.vm.elestio.app:9001
    interval: 30s

backup:
  - name: Database Backup
    source: /var/lib/postgresql/data
    schedule: "0 0 * * *"
    retention: 7
    
  - name: MinIO Backup
    source: /data/minio
    schedule: "0 0 * * *"
    retention: 7

maintenance:
  update_schedule: "0 2 * * 0"  # Every Sunday at 2 AM
  auto_update: false
